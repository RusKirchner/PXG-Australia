{% schema %}
  {
    "name": "Two Videos with Text",
    "settings": [
      {
        "type": "url",
        "id": "video1_url",
        
        "label": "Video 1 URL (YouTube/Vimeo or leave blank for self-hosted)",
      },
      {
        "type": "url",
        "id": "video1_self_hosted_url",
        "label": "Video 1 Self-Hosted URL",
      },
      {
        "type": "textarea",
        "id": "video1_text",
        "label": "Video 1 Text",
        "default": "Description for video 1."
      },
      {
        "type": "url",
        "id": "video2_url",
        "label": "Video 2 URL (YouTube/Vimeo or leave blank for self-hosted)",
      },
      {
        "type": "url",
        "id": "video2_self_hosted_url",
        "label": "Video 2 Self-Hosted URL",
      },
      {
        "type": "textarea",
        "id": "video2_text",
        "label": "Video 2 Text",
        "default": "Description for video 2."
      }
    ],
    "presets": [
      {
        "name": "Two Videos with Text",
        "category": "Custom"
      }
    ]
  }
{% endschema %}
{{ 'video-section.css' | asset_url | stylesheet_tag }}
  {{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}
<section class="section two-videos-section">
  <div class="two-videos-container">
    <div class="video-item">
      <template>
          {%- if section.settings.video_hosted != nil -%}
            {{ section.settings.video_hosted | video_tag: autoplay: true, loop: section.settings.enable_video_looping, muted: true, controls: section.settings.enable_controls }}
          {%- elsif section.settings.video_url != nil -%}
            {%- liquid
              assign loop = ''
              if section.settings.enable_video_looping
                assign loop = '&loop=1&playlist=' | append: section.settings.video_url.id
              endif
            -%}  
            {%- if section.settings.video1_url.type == 'youtube' -%}
              <iframe
                src="https://www.youtube.com/embed/{{ section.settings.video1_url.id }}?enablejsapi=1&autoplay=1{{ loop }}"
                class="js-youtube global-settings-popup"
                allow="autoplay; encrypted-media"
                allowfullscreen
                title="{{ section.settings.description | escape }}"
              ></iframe>
            {%- else -%}
            <iframe
              src="https://player.vimeo.com/video/{{ section.settings.video1_url.id }}?autoplay=1{{ loop }}"
              class="js-vimeo global-settings-popup"
              allow="autoplay; encrypted-media"
              allowfullscreen
              title="{{ section.settings.description | escape }}"
            ></iframe>
            {%- endif -%}
          {%- endif -%}  
        </template>
      </{% if section.settings.video_hosted != nil or section.settings.video_url != nil %}deferred-media{% else %}div{% endif %}>
      <p class="video-text">{{ section.settings.video1_text }}</p>
    </div>
    <div class="video-item">
      {% if section.settings.video2_url contains 'youtube' %}
        <div class="video-wrapper">
          <iframe width="100%" height="315" src="{{ section.settings.video2_url | replace: 'watch?v=', 'embed/' }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      {% elsif section.settings.video2_url contains 'vimeo' %}
        <div class="video-wrapper">
          <iframe width="100%" height="315" src="{{ section.settings.video2_url | replace: 'vimeo.com/', 'player.vimeo.com/video/' }}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
        </div>
      {% elsif section.settings.video2_self_hosted_url != blank %}
        <div class="video-wrapper">
          <video controls>
            <source src="{{ section.settings.video2_self_hosted_url }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      {% endif %}
      <p class="video-text">{{ section.settings.video2_text }}</p>
    </div>
  </div>
</section>

<style>
.two-videos-section {
  padding: 40px 0;
}

.two-videos-container {
  display: flex;
  flex-wrap: wrap;
  gap: 30px;
  justify-content: space-between;
}

.video-item {
  flex: 1 1 45%;
  text-align: center;
}

.video-wrapper {
  position: relative;
  padding-bottom: 56.25%;
  height: 0;
}

.video-wrapper iframe,
.video-wrapper video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.video-text {
  margin-top: 15px;
}
</style>
